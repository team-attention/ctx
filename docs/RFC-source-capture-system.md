# RFC: Source Capture System

> CTX ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤ í†µí•© ì œì•ˆì„œ
> ì‘ì„±ì¼: 2026-01-03
> ìˆ˜ì •ì¼: 2026-01-04
> ì‘ì„±ì: Claude (Opus 4.5) + Agent Council (Codex, Gemini)
> ë¦¬ë·°ì–´: Agent Council (Codex, Gemini) - 2026-01-04

---

## 1. ë°°ê²½ ë° ë¬¸ì œ ì •ì˜

### í˜„ì¬ ìƒí™© (As-Is)

CTXëŠ” íŒŒì¼ ê¸°ë°˜ context ê´€ë¦¬ë¥¼ ì§€ì›í•˜ì§€ë§Œ, **ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤**ì—ì„œ ì§€ì‹ì„ ìˆ˜ì§‘í•˜ëŠ” ê¸°ëŠ¥ì´ ì—†ìŒ:

```
í˜„ì¬ CTXê°€ ë‹¤ë£¨ëŠ” ê²ƒ:
âœ… íŒŒì¼ì‹œìŠ¤í…œ ê¸°ë°˜ context (.ctx/, *.ctx.md)
âœ… CLIë¥¼ í†µí•œ context CRUD (create, load, save, sync)
âœ… Claude Code Pluginì„ í†µí•œ AI ì—°ë™

í˜„ì¬ CTXê°€ ë‹¤ë£¨ì§€ ëª»í•˜ëŠ” ê²ƒ:
âŒ Slack ë©”ì‹œì§€/ìŠ¤ë ˆë“œ
âŒ GitHub ì´ìŠˆ/PR/ì»¤ë°‹
âŒ Claude Code ì„¸ì…˜ íˆìŠ¤í† ë¦¬
âŒ ê¸°íƒ€ ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤
```

### ë¬¸ì œì 

| ë¬¸ì œ | ì„¤ëª… |
|------|------|
| **ì§€ì‹ ìœ ì‹¤** | Slackì—ì„œ ë…¼ì˜ëœ ê²°ì •ì‚¬í•­ì´ contextë¡œ ì €ì¥ë˜ì§€ ì•ŠìŒ |
| **ìˆ˜ë™ ë³µì‚¬** | ì™¸ë¶€ ë°ì´í„°ë¥¼ contextë¡œ ì˜®ê¸°ë ¤ë©´ ìˆ˜ë™ ë³µì‚¬ í•„ìš” |
| **ë‹¨ì ˆëœ íë¦„** | ì„¸ì…˜ íˆìŠ¤í† ë¦¬ê°€ ë‹¤ìŒ ì„¸ì…˜ìœ¼ë¡œ ì´ì–´ì§€ì§€ ì•ŠìŒ |
| **ë¶„ì‚°ëœ ì§€ì‹** | íŒ€ ì§€ì‹ì´ Slack, GitHub, ë¬¸ì„œ ë“±ì— í©ì–´ì ¸ ìˆìŒ |

### í•µì‹¬ ì§ˆë¬¸

> "ë‹¤ì–‘í•œ ì†ŒìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ CTX contextë¡œ ìë™ ì €ì¥í•  ìˆ˜ ìˆì„ê¹Œ?"

---

## 2. ì„¤ê³„ ì›ì¹™

### Council í•©ì˜ ì‚¬í•­ (Codex + Gemini)

Agent Council ë…¼ì˜ë¥¼ í†µí•´ ë‹¤ìŒ ì›ì¹™ì— í•©ì˜:

1. **CLI ë¶ˆë³€ ì›ì¹™**: `ctx save`ëŠ” íŒŒì¼ ì €ì¥ë§Œ ë‹´ë‹¹, source ë¡œì§ ë„£ì§€ ì•ŠìŒ
2. **MCP ì¬ì‚¬ìš©**: ê¸°ì¡´ MCP ì„œë²„ í™œìš© (Slack, GitHub ë“±), ì§ì ‘ êµ¬í˜„ ìµœì†Œí™”
3. **Skill ê¸°ë°˜ ëª¨ë“ˆí™”**: ì†ŒìŠ¤ë³„ Skillë¡œ ë¶„ë¦¬, ì¬ì‚¬ìš©ì„± í™•ë³´
4. **ì¤‘ê°„ ì €ì¥ì†Œ (inbox)**: raw ë°ì´í„° ì„ì‹œ ì €ì¥ â†’ ë””ë²„ê¹…/ì¬ì²˜ë¦¬ ìš©ì´
5. **AI Orchestration**: Agentê°€ Skill ì¡°í•©í•˜ì—¬ ë³µì¡í•œ ì›Œí¬í”Œë¡œìš° ì²˜ë¦¬

### ê¸°ìˆ ì  ì œì•½ (2026-01 ê¸°ì¤€)

GitHub ì´ìŠˆ ì¡°ì‚¬ ê²°ê³¼ í™•ì¸ëœ ì œì•½:

| ê¸°ëŠ¥ | ìƒíƒœ | ê´€ë ¨ ì´ìŠˆ |
|------|------|-----------|
| Agentë³„ MCP ë™ì  ë¡œë“œ | âŒ ë¯¸ì§€ì› | #13700, #13805 |
| Agentë§Œ MCP ì ‘ê·¼ | âŒ ë¯¸ì§€ì› | #6915, #4476 |
| Custom Agent MCP ì ‘ê·¼ | âš ï¸ ë²„ê·¸ | #13605 |
| Task ë³‘ë ¬ ì‹¤í–‰ | âœ… ì§€ì› | - |

**ê²°ë¡ **: Skill ê¸°ë°˜ ì ‘ê·¼ì´ í˜„ì¬ ê°€ì¥ ì•ˆì •ì 

---

## 3. ë³´ì•ˆ ë° í”„ë¼ì´ë²„ì‹œ ì •ì±… (ì‹ ê·œ)

> âš ï¸ Agent Council ë¦¬ë·°ì—ì„œ ê°•ì¡°ëœ í•„ìˆ˜ ì„ í–‰ ìš”êµ¬ì‚¬í•­

### 3.1 ìŠ¤ì½”í”„ ì •ì±…

| ìŠ¤ì½”í”„ | ê¸°ë³¸ê°’ | ë™ì‘ |
|--------|--------|------|
| **í˜„ì¬ í”„ë¡œì íŠ¸** | âœ… ê¸°ë³¸ | í™•ì¸ ì—†ì´ ì§„í–‰ |
| **íŠ¹ì • í”„ë¡œì íŠ¸** | - | í”„ë¡œì íŠ¸ ê²½ë¡œ ëª…ì‹œ í•„ìš” |
| **ì „ì²´ í”„ë¡œì íŠ¸** | - | âš ï¸ í™•ì¸ í”„ë¡¬í”„íŠ¸ í•„ìˆ˜ |

**ê´‘ë²”ìœ„ ìŠ¤ì½”í”„ í™•ì¸ ì˜ˆì‹œ:**
```
âš ï¸ ì „ì²´ í”„ë¡œì íŠ¸ ê²€ìƒ‰ì„ ìš”ì²­í•˜ì…¨ìŠµë‹ˆë‹¤.
ì´ ì‘ì—…ì€ ~/.claude/projects/ ì•„ë˜ ëª¨ë“  ì„¸ì…˜ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤.
ë¯¼ê°í•œ ì •ë³´ê°€ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ? [y/N]
```

### 3.2 ë¯¼ê° ì •ë³´ ì²˜ë¦¬

**ìë™ Redaction ëŒ€ìƒ:**
```
íŒ¨í„´ ë§¤ì¹­ìœ¼ë¡œ ìë™ ë§ˆìŠ¤í‚¹:
- API í‚¤: sk-*, xoxb-*, ghp_*, AKIA*
- ë¹„ë°€ë²ˆí˜¸: password=*, secret=*
- í† í°: Bearer *, token=*
- ê°œì¸ì •ë³´: ì´ë©”ì¼, ì „í™”ë²ˆí˜¸ íŒ¨í„´
```

**Redaction ì ìš© ì‹œì :**
1. **inbox ì €ì¥ ì „**: raw ë°ì´í„°ì—ì„œ 1ì°¨ í•„í„°ë§
2. **ctx save ì „**: ìµœì¢… contextì—ì„œ 2ì°¨ í™•ì¸

**ì‚¬ìš©ì ì œì–´:**
```bash
# Redaction ë¹„í™œì„±í™” (ìœ„í—˜ - ëª…ì‹œì  ë™ì˜ í•„ìš”)
/ctx.capture slack #channel --no-redact

# ì¶”ê°€ íŒ¨í„´ ì§€ì •
/ctx.capture session --redact-pattern "INTERNAL_*"
```

### 3.3 Inbox ë³´ì•ˆ ì •ì±…

| ì •ì±… | ì„¤ì • | ì„¤ëª… |
|------|------|------|
| **ì €ì¥ ìœ„ì¹˜** | `.ctx/inbox/` | í”„ë¡œì íŠ¸ ë¡œì»¬, Git ì œì™¸ |
| **Git ì œì™¸** | `.gitignore` í•„ìˆ˜ | `**/.ctx/inbox/` ì¶”ê°€ |
| **ë³´ê´€ ê¸°ê°„** | 7ì¼ (ê¸°ë³¸) | ìë™ ì •ë¦¬, ì„¤ì • ê°€ëŠ¥ |
| **ìˆ˜ë™ ì •ë¦¬** | `ctx inbox clean` | ì¦‰ì‹œ ì‚­ì œ |
| **ì•”í˜¸í™”** | ì„ íƒì  | ë¯¼ê° í”„ë¡œì íŠ¸ìš© |

**ìë™ ì •ë¦¬ ë™ì‘:**
```bash
# 7ì¼ ì´ìƒ ëœ inbox íŒŒì¼ ìë™ ì‚­ì œ
# ctx sync ì‹¤í–‰ ì‹œ íŠ¸ë¦¬ê±°
ctx sync  # inbox ì •ë¦¬ë„ í•¨ê»˜ ìˆ˜í–‰
```

### 3.4 Provenance (ì¶œì²˜ ì¶”ì )

**ìµœì¢… ì €ì¥ëœ contextì— í•„ìˆ˜ í¬í•¨ ì •ë³´:**

```yaml
---
# Context frontmatterì— ìë™ ì¶”ê°€
captured_from:
  sources:
    - type: slack
      channel: "#team-ai"
      time_range: "2026-01-02 ~ 2026-01-03"
      message_count: 42
    - type: session
      project: "/Users/me/project"
      session_count: 3
  captured_at: "2026-01-03T10:00:00Z"
  run_id: "550e8400-e29b-41d4-a716-446655440000"
---
```

---

## 4. ì œì•ˆ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Request                                               â”‚
â”‚  "ìŠ¬ë™ì´ë‘ ê¹ƒí—™ì—ì„œ ì–´ì œ ë‚´ìš© ê°€ì ¸ì™€ì„œ ì •ë¦¬í•´ì¤˜"              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ctx-capture Agent (Orchestrator)                           â”‚
â”‚  â€¢ ìš”ì²­ ë¶„ì„ â†’ í•„ìš”í•œ skill ê²°ì •                             â”‚
â”‚  â€¢ Skill ìˆœì°¨ í˜¸ì¶œ (ì°¸ì¡°)                                    â”‚
â”‚  â€¢ inbox ê²°ê³¼ ì¢…í•© â†’ ì¸ì‚¬ì´íŠ¸ ì¶”ì¶œ                           â”‚
â”‚  â€¢ ctx save í˜¸ì¶œ                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  slack-capture  â”‚               â”‚ session-capture â”‚
â”‚     Skill       â”‚               â”‚     Skill       â”‚
â”‚                 â”‚               â”‚                 â”‚
â”‚  Slack MCP      â”‚               â”‚ ~/.claude/      â”‚
â”‚  í˜¸ì¶œ ê°€ì´ë“œ    â”‚               â”‚ projects/ ì½ê¸°  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                 â”‚
         â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Slack MCP      â”‚               â”‚  Read (JSONL)   â”‚
â”‚  mcp__slack__*  â”‚               â”‚  ì„¸ì…˜ íŒŒì¼ ë¶„ì„ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  .ctx/inbox/ (ì¤‘ê°„ ì €ì¥ì†Œ)                                   â”‚
â”‚  â”œâ”€â”€ slack/2026-01-03.json                                  â”‚
â”‚  â””â”€â”€ session/2026-01-03.json                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ctx save (ììœ  ê²½ë¡œ)                                        â”‚
â”‚  ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ê²½ë¡œì— ìµœì¢… context ì €ì¥                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì»´í¬ë„ŒíŠ¸ ì—­í• 

| ì»´í¬ë„ŒíŠ¸ | ì—­í•  | ìœ„ì¹˜ |
|----------|------|------|
| **ctx-capture Agent** | Orchestrator, ì—¬ëŸ¬ ì†ŒìŠ¤ ì¡°í•© | `plugin/agents/ctx-capture/` |
| **slack-capture Skill** | Slack MCP ì‚¬ìš© ê°€ì´ë“œ | `plugin/skills/slack-capture/` |
| **session-capture Skill** | Claude Code ì„¸ì…˜ íˆìŠ¤í† ë¦¬ ë¶„ì„ | `plugin/skills/session-capture/` |
| **/ctx.capture ëª…ë ¹ì–´** | ì‚¬ìš©ì ì§„ì…ì  | `plugin/commands/capture.md` |
| **inbox** | ì¤‘ê°„ ì €ì¥ì†Œ (raw ë°ì´í„°) | `.ctx/inbox/<source>/` |

---

## 5. í”ŒëŸ¬ê·¸ì¸ íŒŒì¼ êµ¬ì¡°

```
plugin/
â”œâ”€â”€ .claude-plugin/
â”‚   â””â”€â”€ plugin.json
â”‚
â”œâ”€â”€ .mcp.json                    # MCP ì„œë²„ ë“±ë¡ (ì „ì—­)
â”‚
â”œâ”€â”€ agents/
â”‚   â””â”€â”€ ctx-capture/
â”‚       â””â”€â”€ AGENT.md             # Master orchestrator
â”‚
â”œâ”€â”€ skills/
â”‚   â”œâ”€â”€ slack-capture/
â”‚   â”‚   â””â”€â”€ SKILL.md             # Slack MCP ì‚¬ìš© ê°€ì´ë“œ
â”‚   â”‚
â”‚   â”œâ”€â”€ session-capture/
â”‚   â”‚   â””â”€â”€ SKILL.md             # Claude Code ì„¸ì…˜ íˆìŠ¤í† ë¦¬ ë¶„ì„
â”‚   â”‚
â”‚   â”œâ”€â”€ ctx-load/                # ê¸°ì¡´
â”‚   â””â”€â”€ ctx-save/                # ê¸°ì¡´
â”‚
â”œâ”€â”€ commands/
â”‚   â””â”€â”€ capture.md               # /ctx.capture ëª…ë ¹ì–´
â”‚
â””â”€â”€ shared/
    â””â”€â”€ INBOX_SCHEMA.md          # inbox ì €ì¥ í˜•ì‹ ì •ì˜
```

---

## 6. ìƒì„¸ ì„¤ê³„

### 6.1 MCP ì„¤ì • (`.mcp.json`)

```json
{
  "mcpServers": {
    "slack": {
      "command": "npx",
      "args": ["-y", "@anthropic/mcp-slack"],
      "env": {
        "SLACK_TOKEN": "${SLACK_TOKEN}"
      }
    }
  }
}
```

**ì°¸ê³ **: GitHubì€ `gh` CLI ì‚¬ìš© ê¶Œì¥ (ë” ì•ˆì •ì )

### 6.2 ctx-capture Agent

```yaml
---
name: ctx-capture
description: "ë°ì´í„° ìº¡ì²˜", "ì†ŒìŠ¤ì—ì„œ ê°€ì ¸ì™€", "ìŠ¬ë™/ê¹ƒí—™ ì €ì¥" ìš”ì²­ ì‹œ ì‚¬ìš©
---
```

**ì—­í• **:
1. ì‚¬ìš©ì ìš”ì²­ ë¶„ì„ â†’ í•„ìš”í•œ source ê²°ì •
2. í•´ë‹¹ capture skill ì°¸ì¡°í•˜ì—¬ ë°ì´í„° ìˆ˜ì§‘
3. `.ctx/inbox/<source>/`ì— raw ë°ì´í„° ì €ì¥
4. inbox ê²°ê³¼ ì¢…í•©í•˜ì—¬ ì¸ì‚¬ì´íŠ¸ ì¶”ì¶œ
5. `ctx save`ë¡œ ìµœì¢… context ì €ì¥

### 6.3 Source Capture Skills

#### slack-capture Skill

```yaml
---
name: slack-capture
description: "ìŠ¬ë™ ê°€ì ¸ì™€", "ìŠ¬ë™ ë©”ì‹œì§€ ìº¡ì²˜" ìš”ì²­ ì‹œ ì‚¬ìš©
allowed-tools: mcp__slack__*, Write
---
```

**ì‚¬ìš© MCP ë„êµ¬**:
- `mcp__slack__slack_list_channels` - ì±„ë„ ëª©ë¡
- `mcp__slack__slack_get_channel_history` - ì±„ë„ ë©”ì‹œì§€
- `mcp__slack__slack_get_thread_replies` - ìŠ¤ë ˆë“œ ë‹µê¸€

**Pagination ì „ëµ** (ì‹ ê·œ):
```
1. slack_get_channel_historyëŠ” ê¸°ë³¸ limit=10
2. ëŒ€ëŸ‰ ë°ì´í„° í•„ìš” ì‹œ:
   - cursor ê¸°ë°˜ pagination ì‚¬ìš©
   - ìµœëŒ€ 200ê°œ/ìš”ì²­ (API ì œí•œ)
   - ìš”ì²­ ê°„ 1ì´ˆ ë”œë ˆì´ (rate-limit ëŒ€ì‘)
```

**Thread í™•ì¥ ì „ëµ** (ì‹ ê·œ):
```
1. ê¸°ë³¸: ë©”ì¸ ë©”ì‹œì§€ë§Œ ìˆ˜ì§‘
2. --expand-threads ì˜µì…˜:
   - reply_count > 0ì¸ ë©”ì‹œì§€ì— ëŒ€í•´
   - slack_get_thread_replies í˜¸ì¶œ
   - rate-limit ê³ ë ¤í•˜ì—¬ ìˆœì°¨ ì²˜ë¦¬
```

**Rate-limit ëŒ€ì‘** (ì‹ ê·œ):
```
1. 429 ì—ëŸ¬ ì‹œ exponential backoff
2. ê¸°ë³¸ ë”œë ˆì´: 1ì´ˆ
3. ìµœëŒ€ ì¬ì‹œë„: 3íšŒ
4. Tier 1 ì œí•œ: ~1 req/sec
```

#### session-capture Skill

```yaml
---
name: session-capture
description: "ì„¸ì…˜ ê¸°ë¡ ê°€ì ¸ì™€", "ì˜¤ëŠ˜ ì‘ì—… ë‚´ìš©", "í”¼ë“œë°± ì¶”ì¶œ" ìš”ì²­ ì‹œ ì‚¬ìš©
allowed-tools: Read, Glob, Bash(cat:*), Write
---
```

**ë°ì´í„° ìœ„ì¹˜**: `~/.claude/projects/<encoded-cwd>/*.jsonl`

**ê²½ë¡œ ì¸ì½”ë”© ê·œì¹™**:
- `/` â†’ `-`
- ì˜ˆ: `/Users/hoyeonlee/team-attention/ctx` â†’ `-Users-hoyeonlee-team-attention-ctx`

**ì„¸ì…˜ íŒŒì¼ êµ¬ì¡°** (JSONL):
```json
{"type":"user","message":{"role":"user","content":"..."}}
{"type":"assistant","message":{"role":"assistant","content":"..."}}
```

**ì‚¬ìš© íŒ¨í„´ ì˜ˆì‹œ**:
1. "í•´ë‹¹ ì„¸ì…˜ì—ì„œ ë‚´ê°€ ë‚¨ê¸´ ì£¼ìš” í”¼ë“œë°± ì¶”ì¶œí•´ì¤˜"
2. "ì˜¤ëŠ˜ ì‘ì—…í•œ ê²ƒë“¤ ì¤‘ terraform ê´€ë ¨ ì¸ì‚¬ì´íŠ¸ ì •ë¦¬í•´ì¤˜"
3. "ì´ë²ˆ ì£¼ ctx í”„ë¡œì íŠ¸ ì‘ì—… ìš”ì•½í•´ì¤˜"

> **ìŠ¤ì½”í”„ ì •ì±…** (Section 3.1 ì°¸ì¡°):
> - **ê¸°ë³¸**: í˜„ì¬ í”„ë¡œì íŠ¸ (í™•ì¸ ì—†ì´ ì§„í–‰)
> - **íŠ¹ì • í”„ë¡œì íŠ¸**: ëª…ì‹œì  ê²½ë¡œ í•„ìš”
> - **ì „ì²´ í”„ë¡œì íŠ¸**: âš ï¸ í™•ì¸ í”„ë¡¬í”„íŠ¸ í•„ìˆ˜ (ë¯¼ê° ì •ë³´ ìœ„í—˜)
>
> ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ìŠ¤ì½”í”„ ê²°ì •í•˜ë˜, ê´‘ë²”ìœ„ ìŠ¤ì½”í”„ëŠ” ë°˜ë“œì‹œ í™•ì¸

### 6.4 inbox ìŠ¤í‚¤ë§ˆ

> âš ï¸ Agent Council í”¼ë“œë°± ë°˜ì˜: schema versioning, run_id, provenance ì¶”ê°€

#### ê³µí†µ ìŠ¤í‚¤ë§ˆ (v1)
```json
{
  "schema_version": "1.0",
  "run_id": "550e8400-e29b-41d4-a716-446655440000",
  "source": "<slack|session|github>",
  "fetched_at": "2026-01-03T10:00:00Z",
  "query": { ... },
  "data": { ... },
  "metadata": { ... },
  "provenance": {
    "tool": "ctx-capture",
    "version": "1.0.0",
    "user": "hoyeonlee",
    "cwd": "/Users/hoyeonlee/team-attention/ctx"
  }
}
```

#### Slack inbox
```json
{
  "schema_version": "1.0",
  "run_id": "550e8400-e29b-41d4-a716-446655440000",
  "source": "slack",
  "fetched_at": "2026-01-03T10:00:00Z",
  "query": {
    "channel": "#team-ai",
    "channel_id": "C1234567890",
    "since": "2026-01-02T00:00:00Z",
    "until": "2026-01-03T00:00:00Z",
    "timezone": "Asia/Seoul",
    "expand_threads": false
  },
  "data": {
    "messages": [...]
  },
  "metadata": {
    "message_count": 42,
    "thread_count": 5,
    "user_count": 8,
    "has_more": false,
    "redacted_count": 2
  },
  "provenance": {
    "tool": "ctx-capture",
    "version": "1.0.0",
    "user": "hoyeonlee",
    "cwd": "/Users/hoyeonlee/team-attention/ctx"
  }
}
```

#### Session inbox
```json
{
  "schema_version": "1.0",
  "run_id": "550e8400-e29b-41d4-a716-446655440000",
  "source": "session",
  "fetched_at": "2026-01-03T10:00:00Z",
  "query": {
    "project": "/Users/hoyeonlee/team-attention/ctx",
    "scope": "current_project",
    "date_range": {
      "since": "2026-01-03",
      "until": "2026-01-03"
    },
    "filter": "terraform"
  },
  "data": {
    "sessions": [
      {
        "session_id": "60394218-...",
        "file_path": "~/.claude/projects/-Users-hoyeonlee-.../session.jsonl",
        "messages": [...]
      }
    ]
  },
  "metadata": {
    "session_count": 3,
    "message_count": 150,
    "filtered_message_count": 42,
    "redacted_count": 0
  },
  "provenance": {
    "tool": "ctx-capture",
    "version": "1.0.0",
    "user": "hoyeonlee",
    "cwd": "/Users/hoyeonlee/team-attention/ctx"
  }
}
```

**ì €ì¥ ìœ„ì¹˜**: `.ctx/inbox/<source>/<run_id>.json`
**íŒŒì¼ëª… ë³€ê²½**: ë‚ ì§œ ëŒ€ì‹  run_id ì‚¬ìš© â†’ ë™ì¼ ë‚ ì§œ ì¬ì‹¤í–‰ ì‹œ ë®ì–´ì“°ê¸° ë°©ì§€
**ë³´ê´€ ì •ì±…**:
- `.gitignore`ì— `**/.ctx/inbox/` ì¶”ê°€ í•„ìˆ˜
- 7ì¼ í›„ ìë™ ì •ë¦¬ (ctx sync ì‹œ)
- ìˆ˜ë™ ì •ë¦¬: `ctx inbox clean`

### 6.5 ìµœì¢… ì €ì¥

**ctx saveë¡œ ììœ  ê²½ë¡œì— ì €ì¥** (ë³„ë„ í´ë” êµ¬ì¡° ê°•ì œ ì—†ìŒ)

```bash
# ì˜ˆì‹œ - ì‚¬ìš©ì/Agentê°€ ì›í•˜ëŠ” ê²½ë¡œë¡œ ì €ì¥
ctx save --path slack-summary-2026-01-03.md --content "..."
ctx save --path daily/2026-01-03.md --content "..."
ctx save --path notes/team-meeting.md --content "..."
```

**inbox vs ìµœì¢… ì €ì¥ ë¹„êµ**:

| | **inbox** | **ctx save** |
|---|---|---|
| ì—­í•  | ì¤‘ê°„ ì €ì¥ì†Œ (RAW) | ìµœì¢… context |
| í˜•ì‹ | JSON | Markdown |
| ìœ„ì¹˜ | `.ctx/inbox/` (ê³ ì •) | ììœ  ê²½ë¡œ |
| Git | âŒ .gitignore | âœ… ì»¤ë°‹ ê°€ëŠ¥ |
| ìˆ˜ëª… | ì„ì‹œ | ì˜êµ¬ |

---

## 7. ì›Œí¬í”Œë¡œìš°

### 7.1 ë‹¨ì¼ ì†ŒìŠ¤ (ê°„ë‹¨)

```
User: "ìŠ¬ë™ #general ì–´ì œ ëŒ€í™” ì €ì¥í•´"
                â”‚
                â–¼
        Main Claude
                â”‚
                â–¼
    Skill(slack-capture) ì°¸ì¡°
                â”‚
                â–¼
    mcp__slack__slack_get_channel_history
                â”‚
                â–¼
    .ctx/inbox/slack/2026-01-03.json ì €ì¥
                â”‚
                â–¼
    ctx save --path slack-2026-01-03.md  # ììœ  ê²½ë¡œ
```

### 7.2 ë³µí•© ì†ŒìŠ¤ (Agent ì‚¬ìš©)

```
User: "ìŠ¬ë™ì´ë‘ ì˜¤ëŠ˜ ì„¸ì…˜ ê¸°ë¡ ì¢…í•©í•´ì„œ ì €ì¥í•´"
                â”‚
                â–¼
    Task(ctx-capture Agent)
                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                       â–¼
slack-capture ì°¸ì¡°    session-capture ì°¸ì¡°
    â”‚                       â”‚
    â–¼                       â–¼
Slack MCP í˜¸ì¶œ        ~/.claude/projects/ ì½ê¸°
    â”‚                       â”‚
    â–¼                       â–¼
inbox/slack/           inbox/session/
    â”‚                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    Agentê°€ inbox ì½ê³  ì¢…í•© ì¸ì‚¬ì´íŠ¸ ì¶”ì¶œ
                â”‚
                â–¼
    ctx save --path daily-summary-2026-01-03.md  # ììœ  ê²½ë¡œ
```

### 7.3 ì„¸ì…˜ ê¸°ë°˜ ìš”ì²­ ì˜ˆì‹œ

```
User: "ì˜¤ëŠ˜ ì‘ì—…í•˜ë©´ì„œ terraform ê´€ë ¨í•´ì„œ ë°°ìš´ ê²ƒë“¤ ì •ë¦¬í•´ì¤˜"
                â”‚
                â–¼
        Main Claude
                â”‚
                â–¼
    Skill(session-capture) ì°¸ì¡°
                â”‚
                â–¼
    ~/.claude/projects/<cwd>/ì—ì„œ ì˜¤ëŠ˜ ì„¸ì…˜ íŒŒì¼ ì°¾ê¸°
                â”‚
                â–¼
    JSONL íŒŒì‹± â†’ terraform ê´€ë ¨ ë‚´ìš© í•„í„°ë§
                â”‚
                â–¼
    .ctx/inbox/session/2026-01-03.json ì €ì¥
                â”‚
                â–¼
    ì¸ì‚¬ì´íŠ¸ ì¶”ì¶œ â†’ ctx save --path terraform-learnings.md
```

### 7.4 /ctx.capture ëª…ë ¹ì–´

```bash
/ctx.capture slack #team-ai ì–´ì œ
/ctx.capture session ì˜¤ëŠ˜ terraform
/ctx.capture all ì˜¤ëŠ˜
```

---

## 8. êµ¬í˜„ ê³„íš

> âš ï¸ Agent Council í”¼ë“œë°± ë°˜ì˜: Phase 0 ì¶”ê°€, ìˆœì„œ ì¬ì¡°ì •

### Phase 0: Policy Layer (ìµœìš°ì„  - ì‹ ê·œ)

> ë³´ì•ˆ/í”„ë¼ì´ë²„ì‹œ ì •ì±… ì—†ì´ êµ¬í˜„ ì§„í–‰ ê¸ˆì§€

- [ ] `shared/CAPTURE_POLICY.md` ì‘ì„±
  - ìŠ¤ì½”í”„ ê¸°ë³¸ê°’ ì •ì˜ (í˜„ì¬ í”„ë¡œì íŠ¸)
  - ê´‘ë²”ìœ„ ìŠ¤ì½”í”„ í™•ì¸ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
  - ë¯¼ê° ì •ë³´ redaction íŒ¨í„´ ì •ì˜
  - inbox retention ì •ì±… (7ì¼ ê¸°ë³¸)
- [ ] `shared/INBOX_SCHEMA.md` ì‘ì„±
  - schema_version í•„ë“œ
  - run_id (UUID) ìƒì„± ê·œì¹™
  - provenance metadata í•„ìˆ˜ í•„ë“œ
- [ ] `.gitignore`ì— `**/.ctx/inbox/` ì¶”ê°€

### Phase 1: ê¸°ë°˜ êµ¬ì¶•

- [ ] `.mcp.json` ìƒì„± (Slack MCP ë“±ë¡)
- [ ] `inbox/` ë””ë ‰í† ë¦¬ êµ¬ì¡° ì„¤ì •
- [ ] inbox ì •ë¦¬ ë¡œì§ (`ctx sync` ì—°ë™)

### Phase 2: session-capture ë¨¼ì € (Gemini ì œì•ˆ ì±„íƒ)

> ë„¤íŠ¸ì›Œí¬/API ì—†ì´ ë¡œì»¬ íŒŒì¼ë§Œ ë‹¤ë£¸ â†’ ê°€ì¥ ë¨¼ì € ê²€ì¦ ê°€ëŠ¥

(skill development ìŠ¤í‚¬ì„ ì‚¬ìš©í•´ì„œ ë§Œë“¤ì–´ë¼)
- [ ] `skills/session-capture/SKILL.md` ì‘ì„±
  - ê¸°ë³¸ ìŠ¤ì½”í”„: í˜„ì¬ í”„ë¡œì íŠ¸
  - ê´‘ë²”ìœ„ ìŠ¤ì½”í”„ ì‹œ í™•ì¸ ìš”ì²­ ë¡œì§
  - redaction ì ìš©
- [ ] E2E í…ŒìŠ¤íŠ¸: capture â†’ inbox â†’ ctx save íŒŒì´í”„ë¼ì¸ ê²€ì¦

### Phase 3: slack-capture

(skill development ìŠ¤í‚¬ì„ ì‚¬ìš©í•´ì„œ ë§Œë“¤ì–´ë¼)
- [ ] `skills/slack-capture/SKILL.md` ì‘ì„±
  - pagination ì²˜ë¦¬
  - rate-limit ëŒ€ì‘ (exponential backoff)
  - thread í™•ì¥ ì˜µì…˜
  - timezone ì²˜ë¦¬
- [ ] ì±„ë„ ì„¤ì • ë°©ì•ˆ êµ¬ì²´í™”

### Phase 4: Orchestration & Polish

(agent development ìŠ¤í‚¬ì„ ì‚¬ìš©í•´ì„œ ë§Œë“¤ì–´ë¼)
- [ ] `agents/ctx-capture/AGENT.md` ì‘ì„±
- [ ] ì¸ì‚¬ì´íŠ¸ ì¶”ì¶œ ë¡œì§ ì •ì˜

(command development ìŠ¤í‚¬ì„ ì‚¬ìš©í•´ì„œ ë§Œë“¤ì–´ë¼)
- [ ] `commands/capture.md` ì‘ì„±
  - `--save` ì˜µì…˜ (1ë‹¨ê³„ ì‹¤í–‰)
  - ì§„í–‰ ìƒíƒœ í”¼ë“œë°±
- [ ] UX ê°œì„ 
  - ì§„í–‰ ìƒíƒœ í‘œì‹œ ("slack-capture: searching #channel...")
  - ëª…í™•í•œ ì˜¤ë¥˜ ë©”ì‹œì§€
- [ ] AGENTS.md ì—…ë°ì´íŠ¸
- [ ] README ì—…ë°ì´íŠ¸

---

## 9. í–¥í›„ ê³ ë ¤ì‚¬í•­

### 9.1 ìë™í™” (Hooks)

SessionEnd Hookìœ¼ë¡œ ì„¸ì…˜ ì¢…ë£Œ ì‹œ ìë™ ìº¡ì²˜:

```yaml
# hooks/session-end.md
---
event: SessionEnd
---
ì„¸ì…˜ ì¢…ë£Œ ì‹œ ì£¼ìš” ë‚´ìš©ì„ ìë™ìœ¼ë¡œ ìº¡ì²˜í•©ë‹ˆë‹¤.
ctx-capture agentë¥¼ í˜¸ì¶œí•˜ì—¬ session-captureë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
```

**í˜„ì¬ëŠ” ìˆ˜ë™ ì‹¤í–‰ìœ¼ë¡œ ì‹œì‘, ì•ˆì •í™” í›„ Hook ì¶”ê°€**

### 9.2 ì¶”ê°€ ì†ŒìŠ¤

í™•ì¥ ê°€ëŠ¥í•œ ì†ŒìŠ¤ í›„ë³´:
- Linear ì´ìŠˆ
- Notion í˜ì´ì§€
- Google Docs
- Jira ì´ìŠˆ
- Discord ì±„ë„

### 9.3 ë³‘ë ¬ ì‹¤í–‰ (ë¯¸ë˜)

Claude Codeì—ì„œ Agentë³„ MCP ë™ì  ë¡œë“œê°€ ì§€ì›ë˜ë©´:
- Skill â†’ Agentë¡œ ì „í™˜
- Task ë³‘ë ¬ í˜¸ì¶œë¡œ ì„±ëŠ¥ ê°œì„ 

ê´€ë ¨ GitHub ì´ìŠˆ:
- [#13700](https://github.com/anthropics/claude-code/issues/13700) - Lazy-load MCP servers per agent
- [#6915](https://github.com/anthropics/claude-code/issues/6915) - MCP tools only to subagent (184+ ğŸ‘)

---

## 10. Open Questions & Decisions (ì‹ ê·œ)

> Agent Council (Codex)ì´ ì œê¸°í•œ ì§ˆë¬¸ê³¼ ë‹µë³€

### Q1: ê´‘ë²”ìœ„ ìŠ¤ì½”í”„ ìº¡ì²˜ ì‹œ í™•ì¸ í”„ë¡¬í”„íŠ¸ê°€ í•„ìš”í•œê°€?

**ê²°ì •: âœ… í•„ìš”**

- í˜„ì¬ í”„ë¡œì íŠ¸ ì™¸ì˜ ìŠ¤ì½”í”„ëŠ” í™•ì¸ í•„ìˆ˜
- Section 3.1 ìŠ¤ì½”í”„ ì •ì±… ì°¸ì¡°
- UX: "ì´ ì‘ì—…ì€ ëª¨ë“  í”„ë¡œì íŠ¸ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"

### Q2: inbox/ìµœì¢… contextì—ì„œ í† í°/ì‹œí¬ë¦¿ ì²˜ë¦¬ ë°©ì‹ì€?

**ê²°ì •: 2ë‹¨ê³„ Redaction**

1. **inbox ì €ì¥ ì „**: íŒ¨í„´ ë§¤ì¹­ìœ¼ë¡œ 1ì°¨ ë§ˆìŠ¤í‚¹ (`sk-*` â†’ `[REDACTED]`)
2. **ctx save ì „**: ìµœì¢… ê²€í†  ê¸°íšŒ ì œê³µ
3. **ëª…ì‹œì  ë¹„í™œì„±í™”**: `--no-redact` í”Œë˜ê·¸ë¡œë§Œ ê°€ëŠ¥ (ìœ„í—˜ ê²½ê³  í‘œì‹œ)

Section 3.2 ë¯¼ê° ì •ë³´ ì²˜ë¦¬ ì°¸ì¡°

### Q3: inbox ì •ë¦¬ëŠ” ìë™(TTL) vs ìˆ˜ë™?

**ê²°ì •: í•˜ì´ë¸Œë¦¬ë“œ**

| ë°©ì‹ | ë™ì‘ |
|------|------|
| **ìë™** | 7ì¼ í›„ `ctx sync` ì‹œ ì •ë¦¬ (ê¸°ë³¸) |
| **ìˆ˜ë™** | `ctx inbox clean` ì¦‰ì‹œ ì‚­ì œ |
| **ë¹„í™œì„±í™”** | `ctx inbox clean --keep` ì •ë¦¬ ê±´ë„ˆë›°ê¸° |

### Q4: ìµœì¢… ì €ì¥ markdownì— í¬í•¨í•  ìµœì†Œ provenanceëŠ”?

**ê²°ì •: frontmatterì— captured_from í•„ìˆ˜**

```yaml
---
what: "Slack #team-ai ëŒ€í™” ìš”ì•½"
keywords: ["slack", "team-ai", "2026-01"]
captured_from:
  sources:
    - type: slack
      channel: "#team-ai"
      time_range: "2026-01-02 ~ 2026-01-03"
  captured_at: "2026-01-03T10:00:00Z"
  run_id: "550e8400-..."
---
```

### Q5: `--save` ì˜µì…˜ìœ¼ë¡œ 1ë‹¨ê³„ ì‹¤í–‰ ì§€ì›í•  ê²ƒì¸ê°€?

**ê²°ì •: âœ… ì§€ì› (Phase 4)**

```bash
# 2ë‹¨ê³„ (ê¸°ë³¸) - ê²€í†  ê¸°íšŒ ì œê³µ
/ctx.capture slack #channel
# inbox í™•ì¸ í›„
ctx save ...

# 1ë‹¨ê³„ (í¸ì˜) - ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ìƒí™©
/ctx.capture slack #channel --save
```

---

## 11. ê²°ë¡ 

### í•µì‹¬ ê²°ì •

1. **Skill ê¸°ë°˜ ì ‘ê·¼**: í˜„ì¬ ê°€ì¥ ì•ˆì •ì , MCP ë²„ê·¸ íšŒí”¼
2. **2ê°œ ì†ŒìŠ¤ë¡œ ì‹œì‘**: Session (ë¡œì»¬, ë¨¼ì €), Slack (MCP)
3. **inbox íŒ¨í„´**: ì¤‘ê°„ ì €ì¥ì†Œë¡œ ë””ë²„ê¹…/ì¬í˜„ì„± í™•ë³´ + run_idë¡œ ë®ì–´ì“°ê¸° ë°©ì§€
4. **Agent Orchestration**: ë³µí•© ìš”ì²­ì€ ctx-capture Agentê°€ ì²˜ë¦¬
5. **Policy Layer ì„ í–‰**: ë³´ì•ˆ/í”„ë¼ì´ë²„ì‹œ ì •ì±… ë¨¼ì € í™•ë¦½ (Phase 0)

### ì¥ì 

| ì¸¡ë©´ | ì´ì  |
|------|------|
| **ì¬ì‚¬ìš©ì„±** | Skillì„ Agent/Master ëª¨ë‘ì—ì„œ ì‚¬ìš© |
| **ëª¨ë“ˆí™”** | ì†ŒìŠ¤ë³„ Skill ë…ë¦½ì  ê´€ë¦¬ |
| **ë””ë²„ê¹…** | inboxì— ì¤‘ê°„ ê²°ê³¼ ì €ì¥ + provenance ì¶”ì  |
| **í™•ì¥ì„±** | ìƒˆ ì†ŒìŠ¤ = ìƒˆ Skill ì¶”ê°€ |
| **ì•ˆì •ì„±** | ê²€ì¦ëœ MCP/CLI í™œìš© |
| **ë³´ì•ˆ** | redaction + ìŠ¤ì½”í”„ ì œí•œ + inbox TTL |

### ì°¸ê³  ìë£Œ

- [Claude Code MCP Integration](https://code.claude.com/docs/en/mcp)
- [Claude Code Hooks Reference](https://code.claude.com/docs/en/hooks)
- [Slack MCP Server](https://glama.ai/mcp/servers/@modelcontextprotocol/slack)
- Agent Council ë…¼ì˜ (2026-01-03)
- Agent Council ë¦¬ë·° (2026-01-04) - Codex, Gemini
